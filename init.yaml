ssh_authorized_keys:
  - github:tomruttle
hostname: katana
k3os:
  k3s_args:
    - server
    - --disable traefik
    - --datastore-endpoint etcd
    - --etcd-expose-metrics
    - --kube-controller-manager-arg address=0.0.0.0
    - --kube-controller-manager-arg bind-address=0.0.0.0
    - --kube-proxy-arg metrics-bind-address=0.0.0.0
    - --kube-scheduler-arg address=0.0.0.0
    - --kube-scheduler-arg bind-address=0.0.0.0
  dns_nameservers:
    - 8.8.8.8
    - 8.8.4.4
  ntp_servers:
    - 0.de.pool.ntp.org
    - 1.de.pool.ntp.org
    - 2.de.pool.ntp.org
    - 3.de.pool.ntp.org
write_files:
  - content: |
      [service_eth0]
      Type = ethernet
      IPv4 = 192.168.86.10/255.255.255.0/192.168.86.1
      Nameservers = 8.8.8.8,8.8.4.4
      Timeservers = 0.de.pool.ntp.org,1.de.pool.ntp.org,2.de.pool.ntp.org,3.de.pool.ntp.org
    path: /var/lib/connman/eth0.config
run_cmd:
  - connmanctl disable ethernet
  - hostname katana
  - connmanctl enable ethernet
